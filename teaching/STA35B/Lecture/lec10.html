<!DOCTYPE html>
<html lang="en"><head>
<script src="lec10_files/libs/clipboard/clipboard.min.js"></script>
<script src="lec10_files/libs/quarto-html/tabby.min.js"></script>
<script src="lec10_files/libs/quarto-html/popper.min.js"></script>
<script src="lec10_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="lec10_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="lec10_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="lec10_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="lec10_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.5.57">

  <meta name="author" content="Akira Horiguchi">
  <title>10: data visualization</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="lec10_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="lec10_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="lec10_files/libs/revealjs/dist/theme/quarto.css">
  <link href="lec10_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="lec10_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="lec10_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="lec10_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-titled.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-titled) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-titled.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-titled .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-titled .callout-title  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-titled.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-titled.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-title {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-title {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-title {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-titled .callout-body > .callout-content > :last-child {
    padding-bottom: 0.5rem;
    margin-bottom: 0;
  }

  .callout.callout-titled .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-titled) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-title {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-title {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-title {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-title {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-title {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">10: data visualization</h1>
  <p class="subtitle">STA35B: Statistical Data Science 2</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Akira Horiguchi 
</div>
</div>
</div>

</section><section id="TOC">
<nav role="doc-toc"> 
<h2 id="toc-title">Table of contents</h2>
<ul>
<li><a href="#/ggplot2" id="/toc-ggplot2">ggplot2</a></li>
<li><a href="#/exploring-the-diamonds-data-set" id="/toc-exploring-the-diamonds-data-set">Exploring the diamonds data set</a></li>
<li><a href="#/communicating-ideas" id="/toc-communicating-ideas">Communicating ideas</a></li>
</ul>
</nav>
</section>
<section id="purpose-of-visualizing-data" class="slide level2">
<h2>Purpose of visualizing data</h2>
<ol type="1">
<li>Exploratory data analysis</li>
<li>Presenting findings to others</li>
</ol>
<p>Affects how much effort to put in</p>
<ul>
<li>If just exploring data, a plot doesn’t need to look pretty if you can interpret it</li>
<li>If high-stakes presentation (e.g.&nbsp;for job interview, raise, promotion, etc), might need to add many bespoke features (not focus of this class)</li>
</ul>
</section>
<section id="exploratory-data-analysis" class="slide level2">
<h2>Exploratory data analysis</h2>
<p>Cycle through the following:</p>
<ul>
<li><p>Generate questions about your data.</p></li>
<li><p>Search for answers by visualizing, transforming, and modelling your data.</p></li>
<li><p>Use what you learn to refine your questions and/or generate new questions</p></li>
</ul>
<p>Requires creativity and critical thinking. Two question categories:</p>
<ol type="1">
<li>What type of variation occurs <strong>within</strong> each variable?
<ul>
<li>Mean, standard deviation, skewness, etc</li>
</ul></li>
<li>What type of covariation occurs <strong>between</strong> variables?
<ul>
<li>How does height vary with weight, etc</li>
</ul></li>
</ol>
<!-- ## Presenting findings to others -->
<!-- How much effort do you want to put in? -->
<!-- - If high-stakes presentation (e.g. for job interview, raise, promotion, etc), might need to add many "manual" features (not focus of this class) -->
</section>
<section>
<section id="ggplot2" class="title-slide slide level1 center">
<h1>ggplot2</h1>

</section>
<section id="visualization" class="slide level2">
<h2>Visualization</h2>
<p>We’ll see how to create beautiful visualizations using ggplot2.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href=""></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb1-3"><a href=""></a><span class="fu">library</span>(ggthemes) <span class="co"># color palettes for ggplot</span></span>
<span id="cb1-4"><a href=""></a>penguins</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 8
   species island    bill_length_mm bill_depth_mm flipper_length_mm body_mass_g
   &lt;fct&gt;   &lt;fct&gt;              &lt;dbl&gt;         &lt;dbl&gt;             &lt;int&gt;       &lt;int&gt;
 1 Adelie  Torgersen           39.1          18.7               181        3750
 2 Adelie  Torgersen           39.5          17.4               186        3800
 3 Adelie  Torgersen           40.3          18                 195        3250
 4 Adelie  Torgersen           NA            NA                  NA          NA
 5 Adelie  Torgersen           36.7          19.3               193        3450
 6 Adelie  Torgersen           39.3          20.6               190        3650
 7 Adelie  Torgersen           38.9          17.8               181        3625
 8 Adelie  Torgersen           39.2          19.6               195        4675
 9 Adelie  Torgersen           34.1          18.1               193        3475
10 Adelie  Torgersen           42            20.2               190        4250
# ℹ 334 more rows
# ℹ 2 more variables: sex &lt;fct&gt;, year &lt;int&gt;</code></pre>
</div>
</div>
</section>
<section id="basic-structure-of-ggplot2" class="slide level2">
<h2>Basic structure of <code>ggplot2</code></h2>
<p><code>ggplot()</code> constructs the initial plot.</p>
<ul>
<li>The first argument of <code>ggplot()</code> is the data set for the plot.
<ul>
<li>The data set must be a data frame.</li>
</ul></li>
<li><code>ggplot(data = mpg)</code> creates an empty plot.</li>
</ul>
<p>You then add one or more layers to <code>ggplot()</code> using <code>+</code>.</p>
<ul>
<li><code>geom</code> functions add a geometrical object to the plot.
<ul>
<li><code>geom_point()</code>, <code>geom_smooth()</code>, <code>geom_histogram()</code>, <code>geom_boxplot()</code>, etc.</li>
</ul></li>
</ul>
</section>
<section id="creating-a-ggplot" class="slide level2">
<h2>Creating a ggplot</h2>
<div class="columns">
<div class="column" style="width:39%;">
<ul>
<li>Start with function <code>ggplot()</code></li>
</ul>
<!-- * Add **layers** to this plot -->
<!-- * Then need to define the **aesthetics** of the plot -->
</div><div class="column" style="width:61%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb3-2"><a href=""></a>    <span class="fu">ggplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-2-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="creating-a-ggplot-1" class="slide level2">
<h2>Creating a ggplot</h2>
<div class="columns">
<div class="column" style="width:39%;">
<ul>
<li>Start with function <code>ggplot()</code></li>
<li>Add <strong>global</strong> aesthetics (i.e., aesthetics applied to every layer in plot).</li>
</ul>
<!-- * Add **layers**. Add **aesthetics** to each layer. -->
</div><div class="column" style="width:61%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb4" data-code-line-numbers="2-3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, </span>
<span id="cb4-3"><a href=""></a>               <span class="at">y =</span> body_mass_g)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-3-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="creating-a-ggplot-2" class="slide level2">
<h2>Creating a ggplot</h2>
<div class="columns">
<div class="column" style="width:39%;">
<ul>
<li>Start with function <code>ggplot()</code></li>
<li>Add <strong>global</strong> aesthetics (i.e., aesthetics applied to every layer in plot).</li>
<li>Add <strong>layers</strong>.
<ul>
<li>Display data using <strong>geom</strong>: geometrical object used to represent data</li>
<li><code>geom_bar()</code>: bar chart; <code>geom_line()</code>: lines; <code>geom_boxplot()</code>: boxplot; <code>geom_point()</code>: scatterplot</li>
</ul></li>
</ul>
</div><div class="column" style="width:61%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb5" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, </span>
<span id="cb5-3"><a href=""></a>               <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb5-4"><a href=""></a>    <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-4-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="adding-aesthetics-and-layers" class="slide level2">
<h2>Adding aesthetics and layers</h2>
<div class="columns">
<div class="column" style="width:39%;">
<p>We can have aesthetics change as a function of variables inside the tibble</p>
<ul>
<li>e.g.&nbsp;we can differentiate penguin <strong>species</strong> via colors</li>
<li>When a categorical variable is mapped to an aesthetic, each unique level of the variable (here: species) gets assigned a unique aesthetic value (here: unique color)</li>
</ul>
<!-- `ggplot` assigns a unique aesthetic value (here: unique color) to each , then adds a legend explaining this -->
</div><div class="column" style="width:61%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb6" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm,</span>
<span id="cb6-3"><a href=""></a>               <span class="at">y =</span> body_mass_g,</span>
<span id="cb6-4"><a href=""></a>               <span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb6-5"><a href=""></a>    <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-5-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="adding-aesthetics-and-layers-1" class="slide level2">
<h2>Adding aesthetics and layers</h2>
<div class="columns">
<div class="column" style="width:39%;">
<p>Let’s add a new layer, <code>geom_smooth(method="lm")</code>, which visualizes line of best fit based on a <code>l</code>inear <code>m</code>odel</p>
<ul>
<li>When an aesthetic mapping is added inside <code>ggplot()</code>, it is applied to all layers.
<ul>
<li>So <code>color=species</code> inside <code>ggplot()</code> will group all penguins by species.</li>
<li>We now have a line for each species (not one global line).</li>
</ul></li>
</ul>
</div><div class="column" style="width:61%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb7" data-code-line-numbers="4,6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm,</span>
<span id="cb7-3"><a href=""></a>               <span class="at">y =</span> body_mass_g,</span>
<span id="cb7-4"><a href=""></a>               <span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb7-5"><a href=""></a>    <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb7-6"><a href=""></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-6-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="adding-aesthetics-and-layers-2" class="slide level2">
<h2>Adding aesthetics and layers</h2>
<div class="columns">
<div class="column" style="width:39%;">
<p>Let’s add a new layer, <code>geom_smooth(method="lm")</code>, which visualizes line of best fit based on a <code>l</code>inear <code>m</code>odel</p>
<ul>
<li>When an aesthetic mapping is added inside a layer, it is applied to just that layer.
<ul>
<li>So <code>color=species</code> inside <code>geom_point()</code> will group all penguins by species only for that layer.</li>
<li>We now have one global line for all penguins.</li>
</ul></li>
</ul>
</div><div class="column" style="width:61%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb8" data-code-line-numbers="4-5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm,</span>
<span id="cb8-3"><a href=""></a>               <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb8-4"><a href=""></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> species)) <span class="sc">+</span> </span>
<span id="cb8-5"><a href=""></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">color =</span> <span class="st">"purple"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-7-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="adding-aesthetics-and-layers-3" class="slide level2">
<h2>Adding aesthetics and layers</h2>
<div class="columns">
<div class="column" style="width:39%;">
<p>Let’s make the colors more friendly to color-blind viewers</p>
</div><div class="column" style="width:61%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb9" data-code-line-numbers="6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm,</span>
<span id="cb9-3"><a href=""></a>               <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb9-4"><a href=""></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> species)) <span class="sc">+</span> </span>
<span id="cb9-5"><a href=""></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">color =</span> <span class="st">"purple"</span>) <span class="sc">+</span> </span>
<span id="cb9-6"><a href=""></a>    <span class="fu">scale_color_colorblind</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-8-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div></div>
<!-- * When we want aesthetic mappings at local level, we can use `mapping` arg inside the specific things we want them for -->
<!-- ## Adding aesthetics and layers -->
<!-- ::::: columns -->
<!-- ::: {.column width="50%"} -->
<!-- * Let's now add a new layer, `geom_smooth(method = "lm")`, which visualizes line of best fit based on a `l`inear `m`odel -->
<!-- * We now have lines, but we have lines for each species rather than one global line. -->
<!-- * When aesthetic mappings are added at the beginning of ggplot, they are done so at *global* level - all remaining layers will use the structure defined from this -->
<!-- * So when we say `color=species`, it groups all of the penguins by species -->
<!-- * When we want aesthetic mappings at local level, we can use `mapping` arg inside the specific things we want them for -->
<!-- ::: -->
<!-- ::: {.column width="50%"} -->
<!-- ```{r, fig.width=7, fig.height=4, warning=FALSE} -->
<!-- ggplot(data = penguins, -->
<!--        mapping = aes( -->
<!--          x = flipper_length_mm, -->
<!--          y = body_mass_g)) + -->
<!--   geom_point(mapping = aes(color = species)) +  -->
<!--   geom_smooth(method = "lm") -->
<!-- ``` -->
<!-- ::: -->
<!-- ::::: -->
</section>
<section id="adding-aesthetics-and-layers-4" class="slide level2">
<h2>Adding aesthetics and layers</h2>
<div class="columns">
<div class="column" style="width:39%;">
<p>Let’s further differentiate different species via shapes.</p>
<ul>
<li>We can specify this in a local aesthetic mapping of points using <code>shape=</code></li>
<li>The legend will be updated to show this too!</li>
</ul>
</div><div class="column" style="width:61%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb10" data-code-line-numbers="4-5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb10-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm,</span>
<span id="cb10-3"><a href=""></a>               <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb10-4"><a href=""></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> species, </span>
<span id="cb10-5"><a href=""></a>                   <span class="at">shape =</span> species)) <span class="sc">+</span> </span>
<span id="cb10-6"><a href=""></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">color =</span> <span class="st">"purple"</span>) <span class="sc">+</span> </span>
<span id="cb10-7"><a href=""></a>    <span class="fu">scale_color_colorblind</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-9-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="adding-aesthetics-and-layers-5" class="slide level2">
<h2>Adding aesthetics and layers</h2>
<div class="columns">
<div class="column" style="width:39%;">
<p>Let’s further differentiate different species via shapes.</p>
<ul>
<li>We can make <em>all</em> points the same color by specifying <code>color=</code> outside of <code>aes()</code></li>
</ul>
</div><div class="column" style="width:61%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb11" data-code-line-numbers="4-6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm,</span>
<span id="cb11-3"><a href=""></a>               <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb11-4"><a href=""></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">shape =</span> species), </span>
<span id="cb11-5"><a href=""></a>               <span class="at">color =</span> <span class="st">"orange"</span>) <span class="sc">+</span> </span>
<span id="cb11-6"><a href=""></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>, <span class="at">color=</span><span class="st">"black"</span>) <span class="sc">+</span> </span>
<span id="cb11-7"><a href=""></a>    <span class="fu">scale_color_colorblind</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-10-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="adding-aesthetics-and-layers-6" class="slide level2">
<h2>Adding aesthetics and layers</h2>
<div class="columns">
<div class="column" style="width:39%;">
<p>Let’s further differentiate different species via shapes.</p>
<ul>
<li>We can make <em>all</em> points the same shape by specifying <code>shape=</code> outside of <code>aes()</code></li>
</ul>
</div><div class="column" style="width:61%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb12" data-code-line-numbers="4-5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb12-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm,</span>
<span id="cb12-3"><a href=""></a>               <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb12-4"><a href=""></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> species), </span>
<span id="cb12-5"><a href=""></a>               <span class="at">shape =</span> <span class="dv">7</span>) <span class="sc">+</span> </span>
<span id="cb12-6"><a href=""></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span> </span>
<span id="cb12-7"><a href=""></a>    <span class="fu">scale_color_colorblind</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-11-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="adding-aesthetics-and-layers-7" class="slide level2">
<h2>Adding aesthetics and layers</h2>
<div class="columns">
<div class="column" style="width:39%;">
<p>Let’s further differentiate different species via shapes.</p>
<ul>
<li>We can also specify <code>shape=</code> outside of <code>aes()</code></li>
</ul>
</div><div class="column" style="width:61%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div id="fig-shapes" class="quarto-float quarto-figure quarto-figure-center" data-fig-align="center" alt="Mapping between shapes and the numbers that represent them: 0 - square,  1 - circle, 2 - triangle point up, 3 - plus, 4 - cross, 5 - diamond,  6 - triangle point down, 7 - square cross, 8 - star, 9 - diamond plus,  10 - circle plus, 11 - triangles up and down, 12 - square plus,  13 - circle cross, 14 - square and triangle down, 15 - filled square,  16 - filled circle, 17 - filled triangle point-up, 18 - filled diamond,  19 - solid circle, 20 - bullet (smaller circle), 21 - filled circle blue,  22 - filled square blue, 23 - filled diamond blue, 24 - filled triangle  point-up blue, 25 - filled triangle point down blue.">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-shapes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img data-src="lec10_files/figure-revealjs/fig-shapes-1.png" class="quarto-figure quarto-figure-center" alt="Mapping between shapes and the numbers that represent them: 0 - square,  1 - circle, 2 - triangle point up, 3 - plus, 4 - cross, 5 - diamond,  6 - triangle point down, 7 - square cross, 8 - star, 9 - diamond plus,  10 - circle plus, 11 - triangles up and down, 12 - square plus,  13 - circle cross, 14 - square and triangle down, 15 - filled square,  16 - filled circle, 17 - filled triangle point-up, 18 - filled diamond,  19 - solid circle, 20 - bullet (smaller circle), 21 - filled circle blue,  22 - filled square blue, 23 - filled diamond blue, 24 - filled triangle  point-up blue, 25 - filled triangle point down blue." width="960">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-shapes-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;1: R has 25 built-in shapes that are identified by numbers. There are some seeming duplicates: for example, 0, 15, and 22 are all squares. The difference comes from the interaction of the <code>color</code> and <code>fill</code> aesthetics. The hollow shapes (0–14) have a border determined by <code>color</code>; the solid shapes (15–20) are filled with <code>color</code>; the filled shapes (21–24) have a border of <code>color</code> and are filled with <code>fill</code>.
</figcaption>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="adding-aesthetics-and-layers-8" class="slide level2">
<h2>Adding aesthetics and layers</h2>
<div class="columns">
<div class="column" style="width:39%;">
<p>Let’s further differentiate different species via shapes.</p>
<ul>
<li>We can also specify <code>size=</code> outside of <code>aes()</code></li>
</ul>
</div><div class="column" style="width:61%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb13" data-code-line-numbers="4-5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm,</span>
<span id="cb13-3"><a href=""></a>               <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb13-4"><a href=""></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> species, </span>
<span id="cb13-5"><a href=""></a>                   <span class="at">shape =</span> species), <span class="at">size=</span><span class="dv">4</span>) <span class="sc">+</span> </span>
<span id="cb13-6"><a href=""></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span> </span>
<span id="cb13-7"><a href=""></a>    <span class="fu">scale_color_colorblind</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-13-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div></div>
<!-- ## Adding aesthetics and layers -->
<!-- ::::: columns -->
<!-- ::: {.column width="50%"} -->
<!-- * One thing that remains: we want different shapes for different species -->
<!-- * We can specify this in a local aesthetic mapping of points using `shape=` -->
<!-- * The legend will be updated to show this too! -->
<!-- ```{r, fig.width=7, fig.height=4, warning=FALSE,eval=FALSE} -->
<!-- ggplot(data = penguins, -->
<!--        mapping = aes( -->
<!--          x = flipper_length_mm, -->
<!--          y = body_mass_g)) + -->
<!--   geom_point(mapping = aes( -->
<!--     color = species, -->
<!--     shape = species)) +  -->
<!--   geom_smooth(method = "lm") -->
<!-- ``` -->
<!-- ::: -->
<!-- ::: {.column width="50%"} -->
<!-- ```{r, fig.width=7, fig.height=4, warning=FALSE,echo=FALSE} -->
<!-- ggplot(data = penguins, -->
<!--        mapping = aes( -->
<!--          x = flipper_length_mm, -->
<!--          y = body_mass_g)) + -->
<!--   geom_point(mapping = aes( -->
<!--     color = species, -->
<!--     shape = species)) +  -->
<!--   geom_smooth(method = "lm") -->
<!-- ``` -->
<!-- ::: -->
<!-- ::::: -->
</section>
<section id="now-just-need-to-add-title-and-axis-labels" class="slide level2">
<h2>Now just need to add title and axis labels</h2>
<div class="columns">
<div class="column" style="width:39%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb14" data-code-line-numbers="7-12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm,</span>
<span id="cb14-3"><a href=""></a>               <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb14-4"><a href=""></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> species, </span>
<span id="cb14-5"><a href=""></a>                   <span class="at">shape =</span> species)) <span class="sc">+</span> </span>
<span id="cb14-6"><a href=""></a>    <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>) <span class="sc">+</span> </span>
<span id="cb14-7"><a href=""></a>  <span class="fu">labs</span>(</span>
<span id="cb14-8"><a href=""></a>    <span class="at">title =</span> <span class="st">"Body mass and flipper length"</span>,</span>
<span id="cb14-9"><a href=""></a>    <span class="at">subtitle =</span> <span class="st">"Dimensions for Adelie, Chinstrap, and Gentoo Penguins"</span>,</span>
<span id="cb14-10"><a href=""></a>    <span class="at">x =</span> <span class="st">"Flipper length (mm)"</span>, <span class="at">y =</span> <span class="st">"Body mass (g)"</span>,</span>
<span id="cb14-11"><a href=""></a>    <span class="at">color =</span> <span class="st">"Species"</span>, <span class="at">shape =</span> <span class="st">"Species"</span></span>
<span id="cb14-12"><a href=""></a>  ) <span class="sc">+</span></span>
<span id="cb14-13"><a href=""></a>  <span class="fu">scale_color_colorblind</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:61%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-15-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div></div>
<!-- ## Axis labels -->
<!-- ::::: columns -->
<!-- ::: {.column width="50%"}  -->
<!-- * Now just need to add title and axis labels -->
<!-- ```{r, fig.width=7, fig.height=4, warning=FALSE,eval=FALSE} -->
<!-- ggplot(data = penguins, -->
<!--        mapping = aes( -->
<!--          x = flipper_length_mm, -->
<!--          y = body_mass_g)) + -->
<!--   geom_point(mapping = aes( -->
<!--     color = species, -->
<!--     shape = species)) +  -->
<!--   geom_smooth(method = "lm") +  -->
<!--   labs( -->
<!--     title = "Body mass and flipper length", -->
<!--     subtitle = "Dimensions for Adelie, Chinstrap, and Gentoo Penguins", -->
<!--     x = "Flipper length (mm)", y = "Body mass (g)", -->
<!--     color = "Species", shape = "Species" -->
<!--   ) + -->
<!--   scale_color_colorblind() -->
<!-- ``` -->
<!-- ::: -->
<!-- ::: {.column width="50%"} -->
<!-- ```{r, fig.width=7, fig.height=4, warning=FALSE,echo=FALSE} -->
<!-- ggplot(data = penguins, -->
<!--        mapping = aes( -->
<!--          x = flipper_length_mm, -->
<!--          y = body_mass_g)) + -->
<!--   geom_point(mapping = aes( -->
<!--     color = species, -->
<!--     shape = species)) +  -->
<!--   geom_smooth(method = "lm") +  -->
<!--   labs( -->
<!--     title = "Body mass and flipper length", -->
<!--     subtitle = "Dimensions for Adelie, Chinstrap, and Gentoo Penguins", -->
<!--     x = "Flipper length (mm)", y = "Body mass (g)", -->
<!--     color = "Species", shape = "Species" -->
<!--   ) + -->
<!--   scale_color_colorblind() -->
<!-- ``` -->
<!-- ::: -->
<!-- ::::: -->
<!-- ## ggplot2 calls -->
<!-- * The first two arguments of ggplot are always `data = ` and `mapping = `, so we will often see things like -->
<!-- ```{r, eval = FALSE} -->
<!-- ggplot(penguins, -->
<!--        aes( -->
<!--          x = flipper_length_mm, -->
<!--          y = body_mass_g)) + -->
<!--   geom_point() -->
<!-- ``` -->
<!-- * We can do this with piping as well: -->
<!-- ```{r, eval = FALSE} -->
<!-- penguins |>  -->
<!--   ggplot(aes(x = flipper_length_mm, y = body_mass_g)) + -->
<!--   geom_point() -->
<!-- ``` -->
</section>
<section id="visualizing-distributions" class="slide level2">
<h2>Visualizing distributions</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Categorical</strong> variables take only one of a finite set of values</p>
<ul>
<li>Bar charts are useful for visualizing categorical variables</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species)) <span class="sc">+</span></span>
<span id="cb15-3"><a href=""></a>    <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-16-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><strong>Numeric</strong> values we are familiar with</p>
<ul>
<li>Histograms are useful for these - use argument <code>binwidth =</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb16-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb16-3"><a href=""></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">200</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-17-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="visualizing-distributions-1" class="slide level2">
<h2>Visualizing distributions</h2>
<p>You will likely need to spend time tuning the binwidth parameter</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb17" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb17-3"><a href=""></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">2000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-18-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb18" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb18-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb18-3"><a href=""></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">20</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-19-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="visualizing-distributions-2" class="slide level2">
<h2>Visualizing distributions</h2>
<ul>
<li>A smoothed out version of histogram which is supposed to approximate a probability density function</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb19" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb19-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb19-3"><a href=""></a>    <span class="fu">geom_density</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-20-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb20" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb20-3"><a href=""></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">200</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-21-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="visualizing-distributions-3" class="slide level2">
<h2>Visualizing distributions</h2>
<ul>
<li>Let’s check the difference between setting <code>color =</code> vs <code>fill =</code> with <code>geom_bar</code>:</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb21-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species)) <span class="sc">+</span></span>
<span id="cb21-3"><a href=""></a>    <span class="fu">geom_bar</span>(<span class="at">color =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-22-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb22-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species)) <span class="sc">+</span></span>
<span id="cb22-3"><a href=""></a>    <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-23-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="visualizing-distributions-4" class="slide level2">
<h2>Visualizing distributions</h2>
<ul>
<li>Let’s check the difference between setting <code>color =</code> vs <code>fill =</code> with <code>geom_bar</code>:</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb23-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species)) <span class="sc">+</span></span>
<span id="cb23-3"><a href=""></a>    <span class="fu">geom_bar</span>(<span class="at">color =</span> <span class="st">"red"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-24-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb24-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species)) <span class="sc">+</span></span>
<span id="cb24-3"><a href=""></a>    <span class="fu">geom_bar</span>(<span class="at">fill =</span> <span class="st">"red"</span>, <span class="at">color=</span><span class="st">"purple"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-25-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="visualizing-distributions-5" class="slide level2">
<h2>Visualizing distributions</h2>
<ul>
<li>Box plots allow for visualizing the spread of a distribution</li>
<li>Makes it easy to see 25th percentile, median, 75th percentile, and outliers (&gt;1.5*IQR from 25th or 75th percentile)</li>
</ul>

<img data-src="boxplot.png" width="758" class="r-stretch"></section>
<section id="visualizing-distributions-6" class="slide level2">
<h2>Visualizing distributions</h2>
<p>Let’s see distribution of body mass by species…</p>
<div class="columns">
<div class="column" style="width:50%;">
<p>…using <code>geom_boxplot()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb25-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> species, </span>
<span id="cb25-3"><a href=""></a>               <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb25-4"><a href=""></a>    <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-27-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<p>…using <code>geom_density()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, </span>
<span id="cb26-3"><a href=""></a>               <span class="at">color =</span> species)) <span class="sc">+</span></span>
<span id="cb26-4"><a href=""></a>    <span class="fu">geom_density</span>(<span class="at">linewidth =</span> <span class="fl">0.75</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-28-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="playing-with-visual-parameters" class="slide level2">
<h2>Playing with visual parameters</h2>
<!-- We can map `species` to both `color` and `fill` aesthetics and u -->
<p>Use <code>alpha</code> to add transparency</p>
<ul>
<li><code>alpha</code> is a number between 0 and 1; 0 = transparent, 1 = opaque</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb27-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, </span>
<span id="cb27-3"><a href=""></a>               <span class="at">color =</span> species, </span>
<span id="cb27-4"><a href=""></a>               <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb27-5"><a href=""></a>    <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-29-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb28-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> body_mass_g, </span>
<span id="cb28-3"><a href=""></a>               <span class="at">color =</span> species, </span>
<span id="cb28-4"><a href=""></a>               <span class="at">fill =</span> species)) <span class="sc">+</span></span>
<span id="cb28-5"><a href=""></a>    <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-30-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div></div>
<!-- ## Multiple categorical variables -->
<!-- Stacked bar plots can help visualize relationships between 2 categorical variables -->
<!-- ::::: columns -->
<!-- ::: {.column width="50%"} -->
<!-- * Frequencies of each species on each island: -->
<!-- ```{r,fig.width=7, fig.height=4, warning=FALSE} -->
<!-- ggplot(penguins, aes(x = island, fill = species)) + -->
<!--   geom_bar() -->
<!-- ``` -->
<!-- ::: -->
<!-- ::: {.column width="50%"} -->
<!-- * Isn't easy to tell relative frequency of each percentage -->
<!-- * `position= "fill"` in geom allows for comparing frequencies across distributions -->
<!-- ```{r,fig.width=7, fig.height=4, warning=FALSE} -->
<!-- ggplot(penguins, aes(x = island, fill = species)) + -->
<!--   geom_bar(position = 'fill') -->
<!-- ``` -->
<!-- ::: -->
<!-- ::::: -->
</section>
<section id="multiple-numerical-variables" class="slide level2">
<h2>Multiple numerical variables</h2>
<p>Already saw how to use scatter plots to visualize two numeric variables</p>
<div class="columns">
<div class="column" style="width:80%;">
<p>We can use separate vals for color and shape</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb29-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb29-3"><a href=""></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> species, <span class="at">shape =</span> island))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-31-1.png" width="672"></p>
</figure>
</div>
</div>
</div>
</div><div class="column fragment" style="width:20%;">
<p>Too many things to remember…</p>
</div></div>
</section>
<section id="multiple-numerical-variables-1" class="slide level2">
<h2>Multiple numerical variables</h2>
<p>Too many aesthetic changes (shape, color, fill, size, etc) can clutter plots</p>
<div class="columns">
<div class="column" style="width:23%;">
<ul>
<li>Can use <strong>facets</strong></li>
<li><code>facet_wrap()</code> takes a <em>formula</em> argument</li>
</ul>
</div><div class="column" style="width:77%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb30" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb30-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb30-3"><a href=""></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> species, <span class="at">shape =</span> species)) <span class="sc">+</span></span>
<span id="cb30-4"><a href=""></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>island)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-32-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="multiple-numerical-variables-2" class="slide level2">
<h2>Multiple numerical variables</h2>
<p>Too many aesthetic changes (shape, color, fill, size, etc) can clutter plots</p>
<div class="columns">
<div class="column" style="width:23%;">
<ul>
<li>Can use <strong>facets</strong></li>
<li><code>facet_wrap()</code> takes a <em>formula</em> argument</li>
</ul>
</div><div class="column" style="width:77%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb31" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb31-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb31-3"><a href=""></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> species, <span class="at">shape =</span> species)) <span class="sc">+</span></span>
<span id="cb31-4"><a href=""></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>island, <span class="at">scales=</span><span class="st">"free_y"</span>)  <span class="co"># each panel now has its own y-axis scale</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-33-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="multiple-numerical-variables-3" class="slide level2">
<h2>Multiple numerical variables</h2>
<p>Too many aesthetic changes (shape, color, fill, size, etc) can clutter plots</p>
<div class="columns">
<div class="column" style="width:23%;">
<ul>
<li>Can use <strong>facets</strong></li>
<li><code>facet_wrap()</code> takes a <em>formula</em> argument</li>
</ul>
</div><div class="column" style="width:77%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb32" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb32-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb32-3"><a href=""></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> species, <span class="at">shape =</span> species)) <span class="sc">+</span></span>
<span id="cb32-4"><a href=""></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>island, <span class="at">ncol=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-34-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="multiple-numerical-variables-4" class="slide level2">
<h2>Multiple numerical variables</h2>
<p>Too many aesthetic changes (shape, color, fill, size, etc) can clutter plots</p>
<div class="columns">
<div class="column" style="width:23%;">
<ul>
<li>Can use <strong>facets</strong></li>
<li><code>facet_wrap()</code> takes a <em>formula</em> argument</li>
</ul>
</div><div class="column" style="width:77%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb33" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb33-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb33-3"><a href=""></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> species, <span class="at">shape =</span> species)) <span class="sc">+</span></span>
<span id="cb33-4"><a href=""></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>island, <span class="at">ncol=</span><span class="dv">2</span>, <span class="at">nrow=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-35-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="multiple-numerical-variables-5" class="slide level2">
<h2>Multiple numerical variables</h2>
<p>Too many aesthetic changes (shape, color, fill, size, etc) can clutter plots</p>
<div class="columns">
<div class="column" style="width:23%;">
<ul>
<li>Can use <strong>facets</strong></li>
<li><code>facet_grid()</code> takes a <em>formula</em> argument</li>
</ul>
</div><div class="column" style="width:77%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb34" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb34-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb34-3"><a href=""></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> species, <span class="at">shape =</span> species)) <span class="sc">+</span></span>
<span id="cb34-4"><a href=""></a>    <span class="fu">facet_grid</span>(sex<span class="sc">~</span>island)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-36-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="multiple-numerical-variables-6" class="slide level2">
<h2>Multiple numerical variables</h2>
<p>Too many aesthetic changes (shape, color, fill, size, etc) can clutter plots</p>
<div class="columns">
<div class="column" style="width:23%;">
<ul>
<li>Can use <strong>facets</strong></li>
<li><code>facet_grid()</code> takes a <em>formula</em> argument</li>
</ul>
</div><div class="column" style="width:77%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb35" data-code-line-numbers="4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb35-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb35-3"><a href=""></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> species, <span class="at">shape =</span> species)) <span class="sc">+</span></span>
<span id="cb35-4"><a href=""></a>    <span class="fu">facet_grid</span>(island<span class="sc">~</span>sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-37-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="multiple-numerical-variables-7" class="slide level2">
<h2>Multiple numerical variables</h2>
<p>Which of the following makes it easier to compare engine size (<code>displ</code>) across cars with different drive trains?</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href=""></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ)) <span class="sc">+</span> </span>
<span id="cb36-2"><a href=""></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span> </span>
<span id="cb36-3"><a href=""></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> drv, <span class="at">ncol=</span><span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb36-4"><a href=""></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">32</span>), </span>
<span id="cb36-5"><a href=""></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-38-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href=""></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ)) <span class="sc">+</span> </span>
<span id="cb37-2"><a href=""></a>  <span class="fu">geom_histogram</span>() <span class="sc">+</span></span>
<span id="cb37-3"><a href=""></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> drv, <span class="at">nrow=</span><span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb37-4"><a href=""></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">32</span>), </span>
<span id="cb37-5"><a href=""></a>        <span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-39-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="can-change-order-of-levels-in-factors" class="slide level2">
<h2>Can change order of levels in factors</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb38" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href=""></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb38-2"><a href=""></a>    <span class="fu">mutate</span>(<span class="at">island =</span> <span class="fu">factor</span>(island, <span class="at">levels=</span><span class="fu">c</span>(<span class="st">"Dream"</span>, <span class="st">"Biscoe"</span>, <span class="st">"Torgersen"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb38-3"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb38-4"><a href=""></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> species, <span class="at">shape =</span> species)) <span class="sc">+</span></span>
<span id="cb38-5"><a href=""></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>island)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="lec10_files/figure-revealjs/unnamed-chunk-40-1.png" width="960" class="r-stretch"></section>
<section id="shapes-can-be-difficult-to-distinguish" class="slide level2">
<h2>Shapes can be difficult to distinguish</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href=""></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb39-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb39-3"><a href=""></a>    <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> species, <span class="at">shape =</span> species))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="lec10_files/figure-revealjs/unnamed-chunk-41-1.png" width="672" class="r-stretch"></section>
<section id="sometimes-easier-to-read-by-replacing-shape-with-first-letter" class="slide level2">
<h2>Sometimes easier to read by replacing shape with first letter</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb40" data-code-line-numbers="2,4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href=""></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb40-2"><a href=""></a>    <span class="fu">mutate</span>(<span class="at">species_first_letter =</span> <span class="fu">substr</span>(species, <span class="dv">1</span>, <span class="dv">1</span>)) <span class="sc">|&gt;</span></span>
<span id="cb40-3"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb40-4"><a href=""></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">color =</span> species, <span class="at">label =</span> species_first_letter))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="lec10_files/figure-revealjs/unnamed-chunk-42-1.png" width="672" class="r-stretch"></section>
<section id="might-allow-you-to-remove-the-legend" class="slide level2">
<h2>Might allow you to remove the legend</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb41" data-code-line-numbers="5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href=""></a>penguins <span class="sc">|&gt;</span></span>
<span id="cb41-2"><a href=""></a>    <span class="fu">mutate</span>(<span class="at">species_first_letter =</span> <span class="fu">substr</span>(species, <span class="dv">1</span>, <span class="dv">1</span>)) <span class="sc">|&gt;</span></span>
<span id="cb41-3"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb41-4"><a href=""></a>    <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">color =</span> species, <span class="at">label =</span> species_first_letter)) <span class="sc">+</span></span>
<span id="cb41-5"><a href=""></a>    <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="lec10_files/figure-revealjs/unnamed-chunk-43-1.png" width="672" class="r-stretch"></section>
<section id="saving-plots" class="slide level2">
<h2>Saving plots</h2>
<p>Once you’ve made a plot, you can save using <code>ggsave()</code></p>
<ul>
<li>Either can save whatever plot you made last:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href=""></a>penguins <span class="sc">|&gt;</span> </span>
<span id="cb42-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb42-3"><a href=""></a>    <span class="fu">geom_point</span>()</span>
<span id="cb42-4"><a href=""></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"penguin-plot.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Or you can save the plot object and save that</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href=""></a>p <span class="ot">&lt;-</span> penguins <span class="sc">|&gt;</span> </span>
<span id="cb43-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> flipper_length_mm, <span class="at">y =</span> body_mass_g)) <span class="sc">+</span></span>
<span id="cb43-3"><a href=""></a>    <span class="fu">geom_point</span>()</span>
<span id="cb43-4"><a href=""></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">"penguin-plot.png"</span>, p)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section></section>
<section>
<section id="exploring-the-diamonds-data-set" class="title-slide slide level1 center">
<h1>Exploring the diamonds data set</h1>
<!-- ## Different mappings for different layers -->
<!-- You can also filter and use multiple `geom`s to emphasize different things -->
<!-- ```{r} -->
<!-- #| message: false -->
<!-- ggplot(mpg, aes(x = displ, y = hwy)) +  -->
<!--   geom_point() +  -->
<!--   geom_point(data = mpg |> filter(class == "2seater"),  -->
<!--              shape = "circle open", size = 3, color = "red") -->
<!-- ``` -->
<!-- ## Different mappings for different layers -->
<!-- You can also filter and use multiple `geom`s to emphasize different things -->
<!-- ```{r} -->
<!-- #| message: false -->
<!-- ggplot(mpg, aes(x = displ, y = hwy)) +  -->
<!--   geom_point() +  -->
<!--   geom_point(data = mpg |> filter(class == "2seater"),  -->
<!--              shape = "circle open", size = 3, color = "red") + -->
<!--   geom_point(data = mpg |> filter(class == "2seater"),  -->
<!--              color = "red") -->
<!-- ``` -->
</section>
<section id="diamonds-data-set" class="slide level2">
<h2>Diamonds data set</h2>
<p>Consider the <code>diamonds</code> dataset in ggplot2</p>
<ul>
<li>Contains the prices and other attributes of almost 54,000 diamonds.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href=""></a>diamonds</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 53,940 × 10
   carat cut       color clarity depth table price     x     y     z
   &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1  0.23 Ideal     E     SI2      61.5    55   326  3.95  3.98  2.43
 2  0.21 Premium   E     SI1      59.8    61   326  3.89  3.84  2.31
 3  0.23 Good      E     VS1      56.9    65   327  4.05  4.07  2.31
 4  0.29 Premium   I     VS2      62.4    58   334  4.2   4.23  2.63
 5  0.31 Good      J     SI2      63.3    58   335  4.34  4.35  2.75
 6  0.24 Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48
 7  0.24 Very Good I     VVS1     62.3    57   336  3.95  3.98  2.47
 8  0.26 Very Good H     SI1      61.9    55   337  4.07  4.11  2.53
 9  0.22 Fair      E     VS2      65.1    61   337  3.87  3.78  2.49
10  0.23 Very Good H     VS1      59.4    61   338  4     4.05  2.39
# ℹ 53,930 more rows</code></pre>
</div>
</div>
</section>
<section id="geometric-objects" class="slide level2">
<h2>Geometric objects</h2>
<p>How are these two plots similar?</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href=""></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(carat, price)) <span class="sc">+</span> </span>
<span id="cb46-2"><a href=""></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb46-3"><a href=""></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">28</span>), </span>
<span id="cb46-4"><a href=""></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-47-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href=""></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(carat, price)) <span class="sc">+</span> </span>
<span id="cb47-2"><a href=""></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span> </span>
<span id="cb47-3"><a href=""></a>  <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">28</span>), </span>
<span id="cb47-4"><a href=""></a>        <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">20</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-48-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
<ul>
<li>Both plots contain the same x and y variables; both plots describe same data.</li>
<li>Each plot uses a different geometric object, <code>geom</code>, to represent the data.</li>
</ul>
</section>
<section id="geometric-objects-1" class="slide level2">
<h2>Geometric objects</h2>
<ul>
<li>Can utilize multiple <code>geom</code>s together to elucidate relationship</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href=""></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(carat, price)) <span class="sc">+</span> </span>
<span id="cb48-2"><a href=""></a>  <span class="fu">geom_point</span>() <span class="sc">+</span> </span>
<span id="cb48-3"><a href=""></a>  <span class="fu">geom_smooth</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="lec10_files/figure-revealjs/unnamed-chunk-49-1.png" width="960" class="r-stretch"></section>
<section id="statistical-transformations" class="slide level2">
<h2>Statistical transformations</h2>
<p>Let’s create a bar chart across cuts:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href=""></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(<span class="at">x =</span> cut)) <span class="sc">+</span></span>
<span id="cb49-2"><a href=""></a>  <span class="fu">geom_bar</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="lec10_files/figure-revealjs/unnamed-chunk-50-1.png" width="960" class="r-stretch"><ul>
<li><code>count</code> is not a variable in diamonds, so how is it creating this?</li>
</ul>
</section>
<section id="statistical-transformations-1" class="slide level2">
<h2>Statistical transformations</h2>
<p>Examples</p>
<ul>
<li>Bar charts, histograms, and frequency polygons bin your data, then plot bin counts (the number of points that fall in each bin).</li>
<li>Smoothers fit a model to your data and then plot predictions from the model.</li>
<li>Boxplots compute the five-number summary of the distribution and then display that summary as a specially formatted box.</li>
</ul>
</section>
<section id="statistical-transformations-2" class="slide level2">
<h2>Statistical transformations</h2>
<p>The algorithm used to calculate new values for a graph is called a <strong>stat</strong>.</p>
<ul>
<li>(<strong>stat</strong> is short for <strong>statistical transformation</strong>)</li>
</ul>

<img data-src="visualization-stat-bar.png" id="fig-vis-stat-bar" style="width:100.0%" class="r-stretch quarto-figure-center"><p class="caption">
Figure&nbsp;2
</p></section>
<section id="exploring-variables" class="slide level2">
<h2>Exploring variables</h2>
<p>Two question categories:</p>
<ol type="1">
<li>What type of variation occurs <strong>within</strong> each variable?<br>
</li>
<li>What type of covariation occurs <strong>between</strong> 2+ variables?</li>
</ol>
</section>
<section id="variation" class="slide level2">
<h2>Variation</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><strong>Variation</strong> is tendency for values of a variable to change from measurement to measurement</p>
<ul>
<li>Can be due to measurement error (e.g., measuring height with different rulers) or due to within-group variation (different people have different heights)</li>
<li>Let’s explore the distribution of weights (<code>carat</code>) of the ~50k diamonds from <code>diamonds</code> dataset.</li>
<li><code>carat</code> is numerical, can use histogram:</li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href=""></a>diamonds <span class="sc">|&gt;</span></span>
<span id="cb50-2"><a href=""></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> carat)) <span class="sc">+</span></span>
<span id="cb50-3"><a href=""></a>    <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.5</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-52-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="typical-values" class="slide level2">
<h2>Typical values</h2>
<div class="columns">
<div class="column" style="width:40%;">
<ul>
<li>In bar charts and histograms, tall bars = common values; no bars = values not seen</li>
<li>Questions to ask yourself:
<ul>
<li>Which values are the most common? Why?</li>
<li>Which values are rare? Why? Does that match your expectations?</li>
<li>Can you see any unusual patterns? What might explain them?</li>
</ul></li>
<li>Let’s look at distribution of weights of smaller diamonds.</li>
</ul>
</div><div class="column fragment" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href=""></a>diamonds <span class="sc">|&gt;</span> </span>
<span id="cb51-2"><a href=""></a>  <span class="fu">filter</span>(carat <span class="sc">&lt;</span> <span class="dv">3</span>) <span class="sc">|&gt;</span> </span>
<span id="cb51-3"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> carat)) <span class="sc">+</span></span>
<span id="cb51-4"><a href=""></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="fl">0.01</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-54-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
<ul>
<li>Why are there more diamonds at whole carats than fractional?</li>
<li>Why are more diamonds slightly to the right of each peak than slightly to left?</li>
</ul>
</div></div>
</section>
<section id="unusual-values" class="slide level2">
<h2>Unusual values</h2>
<p>If you encounter unusual values in dataset, and want to ignore them for rest of analysis, two options:</p>
<ol type="1">
<li>Drop entire row with the strange values, e.g.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href=""></a>diamonds_filtered <span class="ot">&lt;-</span> diamonds <span class="sc">|&gt;</span></span>
<span id="cb52-2"><a href=""></a>  <span class="fu">filter</span>(<span class="fu">between</span>( y, <span class="dv">3</span>, <span class="dv">20</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Replacing unusual values with missing values</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href=""></a>diamonds2 <span class="ot">&lt;-</span> diamonds <span class="sc">|&gt;</span></span>
<span id="cb53-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">y =</span> <span class="fu">if_else</span>(y <span class="sc">&lt;</span> <span class="dv">3</span> <span class="sc">|</span> y <span class="sc">&gt;</span> <span class="dv">20</span>, <span class="cn">NA</span>, y))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>Latter is more recommended behavior.</li>
</ul>
</section>
<section id="covariation" class="slide level2">
<h2>Covariation</h2>
<p>… is tendency for values of 2+ variables to vary together in a related way</p>
<!-- ## Categorical and numerical variable -->
<ul>
<li>How does price (numerical) of a diamond vary with quality (categorical)?</li>
<li>Can use <code>geom_freqpoly()</code> to show “frequency polygons” (similar to histogram)</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href=""></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(<span class="at">x =</span> price)) <span class="sc">+</span></span>
<span id="cb54-2"><a href=""></a>  <span class="fu">geom_freqpoly</span>(<span class="fu">aes</span>(<span class="at">color =</span> cut), <span class="at">binwidth =</span> <span class="dv">500</span>, <span class="at">linewidth =</span> <span class="fl">0.75</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="lec10_files/figure-revealjs/unnamed-chunk-57-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"><ul>
<li>Not super informative, since the height mainly reflects the count.</li>
</ul>
</section>
<section id="covariation-1" class="slide level2">
<h2>Covariation</h2>
<ul>
<li>More useful to understand the <em>density</em> of the variable (count / total number)</li>
<li>To do this, we can use <code>after_stat(density)</code>, which does this normalization <!-- * Default behavior is `after_stat(count)` --></li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href=""></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(<span class="at">x =</span> price, <span class="at">y =</span> <span class="fu">after_stat</span>(density))) <span class="sc">+</span></span>
<span id="cb55-2"><a href=""></a>  <span class="fu">geom_freqpoly</span>(<span class="fu">aes</span>(<span class="at">color =</span> cut), <span class="at">binwidth =</span> <span class="dv">500</span>, <span class="at">linewidth =</span> <span class="fl">0.75</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="lec10_files/figure-revealjs/unnamed-chunk-58-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"><ul>
<li>Seems diamond quality has no significant effect?</li>
</ul>
<!-- ```{r} -->
<!-- #| layout-ncol: 2 -->
<!-- #| fig-width: 4 -->
<!-- ggplot(diamonds, aes(x = price, y = after_stat(count))) + -->
<!--   geom_freqpoly(aes(color = cut), binwidth = 500, linewidth = 0.75) -->
<!-- ggplot(diamonds, aes(x = price, y = after_stat(density))) + -->
<!--   geom_freqpoly(aes(color = cut), binwidth = 500, linewidth = 0.75) -->
<!-- ``` -->
</section>
<section id="covariation-2" class="slide level2">
<h2>Covariation</h2>
<ul>
<li>Let’s further inspect with a box plot</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href=""></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(<span class="at">x =</span> cut, <span class="at">y =</span> price, <span class="at">fill =</span> cut)) <span class="sc">+</span></span>
<span id="cb56-2"><a href=""></a>  <span class="fu">geom_boxplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="lec10_files/figure-revealjs/unnamed-chunk-59-1.png" width="960" class="r-stretch"><ul>
<li>Can now easily compare medians and 25th/75th percentiles</li>
<li>Better quality diamonds are typically cheaper?! We’ll investigate why.</li>
</ul>
<!-- ## Factor orders -->
<!-- .pull-left[ -->
<!-- * `cut` in the `diamonds` dataset is an **(ordered) factor**: categorical varibale which has ordering (fair < good < very good, etc) -->
<!-- * We'll see a lot more about factors in the next few lectures -->
<!-- * We can re-define the ordering of factors using `fct_reorder()` -->
<!-- ```{r} -->
<!-- #| fig-alt:  -->
<!-- #| fig-width: 4.5 -->
<!-- ggplot(mpg, aes(x = fct_reorder(class, hwy, median), y = hwy)) + -->
<!--   geom_boxplot() -->
<!-- ``` -->
<!-- ] -->
<!-- .pull-right[ -->
<!-- * If we have long variable names, sometimes better by making the y axis have labels  -->
<!-- ```{r} -->
<!-- #| fig-alt: | -->
<!-- #| fig-width: 4.5 -->
<!-- ggplot(mpg, aes(x = hwy, y = fct_reorder(class, hwy, median))) + -->
<!--   geom_boxplot() -->
<!-- ``` -->
<!-- ] -->
</section>
<section id="better-quality-diamonds-are-typically-cheaper" class="slide level2">
<h2>Better quality diamonds are typically cheaper?!</h2>
<ul>
<li>What might be responsible for this? Recall variables: x,y,z refer to length/width/depth of diamond in mm</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href=""></a><span class="fu">colnames</span>(diamonds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "carat"   "cut"     "color"   "clarity" "depth"   "table"   "price"  
 [8] "x"       "y"       "z"      </code></pre>
</div>
</div>
<ul>
<li>Let’s look at <strong>size</strong> vs price.</li>
</ul>
</section>
<section id="better-quality-diamonds-are-typically-cheaper-1" class="slide level2">
<h2>Better quality diamonds are typically cheaper?!</h2>
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href=""></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(x, price)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">40</span>), <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">32</span>))</span>
<span id="cb59-2"><a href=""></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(y, price)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">40</span>), <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">32</span>))</span>
<span id="cb59-3"><a href=""></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(z, price)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">40</span>), <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">32</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="3">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-61-1.png" width="960"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-61-2.png" width="960"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-61-3.png" width="960"></p>
</div>
</div>
</div>
<ul>
<li>Clearly some outliers - “zero” length / width / depth diamonds apparently?</li>
<li>But still some positive correlation between x, y, z and price. <!-- * Hard to see with so many dots. Let's use `alpha=` to add some transparency. --></li>
<li>Let’s clean up the tibble to only view the middle 95% of values for x, y, z.</li>
</ul>
<!-- ## Size vs price in diamonds -->
<!-- ```{r} -->
<!-- #| layout-ncol: 3 -->
<!-- #| fig-height: 7 -->
<!-- ggplot(diamonds, aes(x, price)) + geom_point(alpha = 0.02) -->
<!-- ggplot(diamonds, aes(y, price)) + geom_point(alpha = 0.02) -->
<!-- ggplot(diamonds, aes(z, price)) + geom_point(alpha = 0.02) -->
<!-- ``` -->
<!-- * Clearly some outliers - "zero" length / width / depth diamonds apparently? -->
<!-- * But still some positive correlation between x, y, z and price -->
<!-- * Let's clean up the tibble to only view the middle 95% of values for x, y, z. -->
</section>
<section id="better-quality-diamonds-are-typically-cheaper-2" class="slide level2">
<h2>Better quality diamonds are typically cheaper?!</h2>
<ul>
<li>Let’s clean up the tibble to only view the middle 95% of values for x, y, z</li>
</ul>
<!-- ```{r} -->
<!-- diamonds_middle <- diamonds |>  -->
<!--   filter(between(x, quantile(diamonds$x, 0.025), quantile(diamonds$x, 0.975)), -->
<!--          between(y, quantile(diamonds$y, 0.025), quantile(diamonds$y, 0.975)), -->
<!--          between(z, quantile(diamonds$z, 0.025), quantile(diamonds$z, 0.975))) -->
<!-- ``` -->
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href=""></a>diamonds_middle <span class="ot">&lt;-</span> diamonds <span class="sc">|&gt;</span> </span>
<span id="cb60-2"><a href=""></a>  <span class="fu">filter</span>(<span class="fu">between</span>(x, <span class="fu">quantile</span>(x, <span class="fl">0.025</span>), <span class="fu">quantile</span>(x, <span class="fl">0.975</span>)),</span>
<span id="cb60-3"><a href=""></a>         <span class="fu">between</span>(y, <span class="fu">quantile</span>(y, <span class="fl">0.025</span>), <span class="fu">quantile</span>(y, <span class="fl">0.975</span>)),</span>
<span id="cb60-4"><a href=""></a>         <span class="fu">between</span>(z, <span class="fu">quantile</span>(z, <span class="fl">0.025</span>), <span class="fu">quantile</span>(z, <span class="fl">0.975</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>or</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href=""></a>IsInMiddle95 <span class="ot">&lt;-</span> <span class="cf">function</span>(a) <span class="fu">between</span>(a, <span class="fu">quantile</span>(a, <span class="fl">0.025</span>), <span class="fu">quantile</span>(a, <span class="fl">0.975</span>))</span>
<span id="cb61-2"><a href=""></a>diamonds_middle_v2 <span class="ot">&lt;-</span> diamonds <span class="sc">|&gt;</span> </span>
<span id="cb61-3"><a href=""></a>  <span class="fu">filter</span>(<span class="fu">if_all</span>(x<span class="sc">:</span>z, IsInMiddle95))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Are the two approaches the same?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href=""></a><span class="fu">identical</span>(diamonds_middle, diamonds_middle_v2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="better-quality-diamonds-are-typically-cheaper-3" class="slide level2">
<h2>Better quality diamonds are typically cheaper?!</h2>
<ul>
<li>Let’s clean up the tibble to only view the middle 95% of values for x, y, z</li>
</ul>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href=""></a><span class="fu">ggplot</span>(diamonds_middle, <span class="fu">aes</span>(x, price)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">40</span>), <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">32</span>))</span>
<span id="cb64-2"><a href=""></a><span class="fu">ggplot</span>(diamonds_middle, <span class="fu">aes</span>(y, price)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">40</span>), <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">32</span>))</span>
<span id="cb64-3"><a href=""></a><span class="fu">ggplot</span>(diamonds_middle, <span class="fu">aes</span>(z, price)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">axis.title =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">40</span>), <span class="at">axis.text =</span> <span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">32</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="3">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-65-1.png" width="960"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-65-2.png" width="960"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-65-3.png" width="960"></p>
</div>
</div>
</div>
<ul>
<li>Appears x, y, z (length/width/depth) are highly correlated with price</li>
<li>Let’s explore the relationship between estimated volume (x*y*z) and price</li>
</ul>
</section>
<section id="better-quality-diamonds-are-typically-cheaper-4" class="slide level2">
<h2>Better quality diamonds are typically cheaper?!</h2>
<!-- * Appears x, y, z (length/width/depth) are highly correlated with price -->
<ul>
<li>Let’s look at the relationship between estimated volume (x*y*z) and price</li>
</ul>
<div class="columns">
<div class="column" style="width:70%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href=""></a>diamonds_middle <span class="sc">|&gt;</span> </span>
<span id="cb65-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">est_volume =</span> x<span class="sc">*</span>y<span class="sc">*</span>z) <span class="sc">|&gt;</span> </span>
<span id="cb65-3"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> est_volume, <span class="at">y =</span> price)) <span class="sc">+</span></span>
<span id="cb65-4"><a href=""></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.05</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-66-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:30%;">
<ul>
<li>Appears to be a strong correlation.</li>
<li>Think about why we previously found that higher quality diamonds were cheaper.</li>
</ul>
</div></div>
</section>
<section id="better-quality-diamonds-are-typically-cheaper-5" class="slide level2">
<h2>Better quality diamonds are typically cheaper?!</h2>
<p>Hypothesis: high quality diamonds are smaller, low quality diamonds are larger.</p>
<ul>
<li>To investigate, let’s visualize variation in size for each category of quality</li>
</ul>
<div class="columns">
<div class="column" style="width:33.3%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href=""></a>diamonds_middle <span class="sc">|&gt;</span> </span>
<span id="cb66-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">est_volume =</span> x<span class="sc">*</span>y<span class="sc">*</span>z) <span class="sc">|&gt;</span> </span>
<span id="cb66-3"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(cut, est_volume, <span class="at">fill=</span>cut)) <span class="sc">+</span></span>
<span id="cb66-4"><a href=""></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb66-5"><a href=""></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-67-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column fragment" style="width:33.3%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href=""></a>diamonds_middle <span class="sc">|&gt;</span> </span>
<span id="cb67-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">est_volume =</span> x<span class="sc">*</span>y<span class="sc">*</span>z) <span class="sc">|&gt;</span> </span>
<span id="cb67-3"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(cut, est_volume, <span class="at">fill=</span>cut)) <span class="sc">+</span></span>
<span id="cb67-4"><a href=""></a>  <span class="fu">geom_violin</span>(<span class="at">draw_quantiles =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>)) <span class="sc">+</span> </span>
<span id="cb67-5"><a href=""></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-68-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column fragment" style="width:33.3%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href=""></a>diamonds_middle <span class="sc">|&gt;</span> </span>
<span id="cb68-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">est_volume =</span> x<span class="sc">*</span>y<span class="sc">*</span>z) <span class="sc">|&gt;</span> </span>
<span id="cb68-3"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(est_volume, <span class="at">color=</span>cut)) <span class="sc">+</span></span>
<span id="cb68-4"><a href=""></a>  <span class="fu">geom_density</span>() <span class="sc">+</span></span>
<span id="cb68-5"><a href=""></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="fl">0.9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-69-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column fragment" style="width:99%;">
<p>Hypothesis seems reasonable</p>
</div></div>
</section>
<section id="better-quality-diamonds-are-typically-cheaper-6" class="slide level2">
<h2>Better quality diamonds are typically cheaper?!</h2>
<p>Now let’s look at size vs price <em>for each <code>cut</code></em></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href=""></a>diamonds_middle <span class="sc">|&gt;</span></span>
<span id="cb69-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">est_volume =</span> x<span class="sc">*</span>y<span class="sc">*</span>z) <span class="sc">|&gt;</span></span>
<span id="cb69-3"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(est_volume, price, <span class="at">color =</span> cut)) <span class="sc">+</span></span>
<span id="cb69-4"><a href=""></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb69-5"><a href=""></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.8</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-70-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href=""></a>diamonds_middle <span class="sc">|&gt;</span></span>
<span id="cb70-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">est_volume =</span> x<span class="sc">*</span>y<span class="sc">*</span>z) <span class="sc">|&gt;</span></span>
<span id="cb70-3"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(est_volume, price, <span class="at">color =</span> cut)) <span class="sc">+</span></span>
<span id="cb70-4"><a href=""></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span> </span>
<span id="cb70-5"><a href=""></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.8</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-71-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
<!-- ## Better quality diamonds are typically cheaper?! -->
<!-- We were looking at estimated volume, but could also look at the *weight* (`carat`) -->
<!-- ::::: columns -->
<!-- ::: {.column width="50%"} -->
<!-- * Let's see how if weight varies by class. -->
<!-- ```{r} -->
<!-- diamonds |> -->
<!--   ggplot(aes(cut, carat, fill=cut)) + -->
<!--   geom_boxplot() -->
<!-- ``` -->
<!-- ::: -->
<!-- ::: {.column width="50%" .fragment} -->
<!-- * Again many outliers; let's look at middle 95%. -->
<!-- ```{r} -->
<!-- diamonds |>  -->
<!--   filter(if_all(carat, IsInMiddle95)) |>  -->
<!--   ggplot(aes(cut, carat, fill=cut)) + -->
<!--   geom_boxplot() -->
<!-- ``` -->
<!-- ::: -->
<!-- ::::: -->
<!-- ## Better quality diamonds are typically cheaper?! -->
<!-- ::::: columns -->
<!-- ::: {.column width="50%"} -->
<!-- * And now let's visualize relationship between carat size and price by cut: -->
<!-- ```{r, echo=FALSE, message=FALSE} -->
<!-- #| layout-ncol: 1 -->
<!-- #| fig-width: 4.5 -->
<!-- diamonds_middle |> -->
<!--   ggplot(aes(x = carat, y = price, color = cut)) + -->
<!--   geom_point(alpha = 0.5, show.legend=FALSE) -->
<!-- diamonds_middle |> -->
<!--   mutate(est_volume = x*y*z) |> -->
<!--   ggplot(aes(x = carat, y = price, color = cut)) + -->
<!--   geom_smooth() -->
<!-- ``` -->
<!-- ::: -->
<!-- ::: {.column width="50%"} -->
<!-- * Compare this to what happens if we didn't ignore outliers! -->
<!-- ```{r, echo=FALSE, message=FALSE} -->
<!-- #| layout-ncol: 1 -->
<!-- #| fig-width: 4.5 -->
<!-- diamonds |> -->
<!--   ggplot(aes(x = carat, y = price, color = cut)) + -->
<!--   geom_point(alpha = 0.5, show.legend=FALSE) -->
<!-- diamonds |> -->
<!--   mutate(est_volume = x*y*z) |> -->
<!--   ggplot(aes(x = carat, y = price, color = cut)) + -->
<!--   geom_smooth() -->
<!-- ``` -->
<!-- ::: -->
<!-- ::::: -->
</section></section>
<section>
<section id="communicating-ideas" class="title-slide slide level1 center">
<h1>Communicating ideas</h1>

</section>
<section id="communicating-ideas-1" class="slide level2">
<h2>Communicating ideas</h2>
<ul>
<li>Now we’ll look at how to best display data once we’ve figured out some meaningful relationships between things</li>
<li>Packages we’ll be using: <code>tidyverse</code>, <code>scales</code>, <code>ggrepel</code>, <code>patchwork</code></li>
</ul>
</section>
<section id="communicating-ideas-2" class="slide level2">
<h2>Communicating ideas</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Good labels are crucial to good figures:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href=""></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span></span>
<span id="cb71-2"><a href=""></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> class)) <span class="sc">+</span></span>
<span id="cb71-3"><a href=""></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb71-4"><a href=""></a>  <span class="fu">labs</span>(</span>
<span id="cb71-5"><a href=""></a>    <span class="at">x =</span> <span class="st">"Engine displacement (L)"</span>,</span>
<span id="cb71-6"><a href=""></a>    <span class="at">y =</span> <span class="st">"Highway fuel economy (mpg)"</span>,</span>
<span id="cb71-7"><a href=""></a>    <span class="at">color =</span> <span class="st">"Car type"</span>,</span>
<span id="cb71-8"><a href=""></a>    <span class="at">title =</span> <span class="st">"Fuel efficiency generally decreases with engine size"</span>,</span>
<span id="cb71-9"><a href=""></a>    <span class="at">subtitle =</span> <span class="st">"Two seaters (sports cars) are an exception due to their light weight"</span>,</span>
<span id="cb71-10"><a href=""></a>    <span class="at">caption =</span> <span class="st">"Data from fueleconomy.gov"</span></span>
<span id="cb71-11"><a href=""></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-74-1.png" width="528"></p>
</figure>
</div>
</div>
</div>
</div></div>
<!-- ## Annotations -->
<!-- Often helpful to label individual observations or groups of observations -->
<!-- ```{r message=FALSE} -->
<!-- #| fig-width: 10 -->
<!-- ggplot(mpg, aes(displ, hwy, color = drv)) + -->
<!--   geom_point(alpha = 0.3) + -->
<!--   geom_smooth(se = FALSE) + -->
<!--   theme(legend.position = c(0.9, 0.8)) -->
<!-- ``` -->
<!-- How can we improve this plot? (What is 4, f, r?) -->
</section>
<section id="annotations" class="slide level2">
<h2>Annotations</h2>
<!-- Often helpful to label individual observations or groups of observations -->
<div class="columns">
<div class="column" style="width:57%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href=""></a>pp <span class="ot">&lt;-</span> mpg <span class="sc">|&gt;</span> </span>
<span id="cb72-2"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(displ, hwy, <span class="at">color =</span> drv)) <span class="sc">+</span> </span>
<span id="cb72-3"><a href=""></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span> </span>
<span id="cb72-4"><a href=""></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb72-5"><a href=""></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="fl">0.8</span>)) <span class="sc">+</span></span>
<span id="cb72-6"><a href=""></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Engine displacement (L)"</span>, <span class="at">y =</span> <span class="st">"Highway fuel economy (mpg)"</span>, <span class="at">color =</span> <span class="st">"Drive train"</span>, <span class="at">title =</span> <span class="st">"Fuel efficiency generally decreases with engine size"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:43%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href=""></a>pp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-76-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
<p>How can we improve this plot? (What is 4, f, r?)</p>
</div></div>
</section>
<section id="annotations-1" class="slide level2">
<h2>Annotations</h2>
<p>Often helpful to label individual observations or groups of observations</p>
<ul>
<li><code>geom_text()</code>, similar to <code>geom_point()</code> but has additional aesthetic <code>label</code>.</li>
<li>Label could come from tibble itself, or could use custom user-added labels</li>
</ul>
<div class="columns">
<div class="column fragment" style="width:50%;">
<ul>
<li>Let’s create custom labels</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href=""></a>label_info <span class="ot">&lt;-</span> mpg <span class="sc">|&gt;</span></span>
<span id="cb74-2"><a href=""></a>  <span class="fu">group_by</span>(drv) <span class="sc">|&gt;</span></span>
<span id="cb74-3"><a href=""></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(displ)) <span class="sc">|&gt;</span></span>
<span id="cb74-4"><a href=""></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb74-5"><a href=""></a>  <span class="fu">mutate</span>(</span>
<span id="cb74-6"><a href=""></a>    <span class="at">drive_type =</span> <span class="fu">case_when</span>(</span>
<span id="cb74-7"><a href=""></a>      drv <span class="sc">==</span> <span class="st">"f"</span> <span class="sc">~</span> <span class="st">"front-wheel drive"</span>,</span>
<span id="cb74-8"><a href=""></a>      drv <span class="sc">==</span> <span class="st">"r"</span> <span class="sc">~</span> <span class="st">"rear-wheel drive"</span>,</span>
<span id="cb74-9"><a href=""></a>      drv <span class="sc">==</span> <span class="st">"4"</span> <span class="sc">~</span> <span class="st">"4-wheel drive"</span></span>
<span id="cb74-10"><a href=""></a>    )</span>
<span id="cb74-11"><a href=""></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb74-12"><a href=""></a>  <span class="fu">select</span>(displ, hwy, drv, drive_type)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column fragment" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href=""></a>label_info</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 4
# Groups:   drv [3]
  displ   hwy drv   drive_type       
  &lt;dbl&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;            
1   6.5    17 4     4-wheel drive    
2   5.3    25 f     front-wheel drive
3   7      24 r     rear-wheel drive </code></pre>
</div>
</div>
<ul>
<li>Can use <code>label_info</code> to directly label groups and replace legend</li>
<li>x and y aesthetics the same as in the original <code>mpg</code> tibble</li>
</ul>
<!-- * But then want to set `hjust` and `vjust`. -->
</div></div>
</section>
<section id="annotations-2" class="slide level2">
<h2>Annotations</h2>
<div class="columns">
<div class="column" style="width:57%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb77" data-code-line-numbers="5-8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href=""></a>pp <span class="ot">&lt;-</span> mpg <span class="sc">|&gt;</span> </span>
<span id="cb77-2"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(displ, hwy, <span class="at">color =</span> drv)) <span class="sc">+</span> </span>
<span id="cb77-3"><a href=""></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span> </span>
<span id="cb77-4"><a href=""></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb77-5"><a href=""></a>  <span class="fu">geom_text</span>(</span>
<span id="cb77-6"><a href=""></a>    <span class="at">data =</span> label_info,</span>
<span id="cb77-7"><a href=""></a>    <span class="fu">aes</span>(<span class="at">label =</span> drive_type),</span>
<span id="cb77-8"><a href=""></a>    <span class="at">size =</span> <span class="dv">8</span></span>
<span id="cb77-9"><a href=""></a>  ) <span class="sc">+</span></span>
<span id="cb77-10"><a href=""></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb77-11"><a href=""></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Engine displacement (L)"</span>, <span class="at">y =</span> <span class="st">"Highway fuel economy (mpg)"</span>, <span class="at">color =</span> <span class="st">"Drive train"</span>, <span class="at">title =</span> <span class="st">"Fuel efficiency generally decreases with engine size"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:43%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href=""></a>pp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-80-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="annotations-3" class="slide level2">
<h2>Annotations</h2>
<div class="columns">
<div class="column" style="width:57%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb79" data-code-line-numbers="5-9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href=""></a>pp <span class="ot">&lt;-</span> mpg <span class="sc">|&gt;</span> </span>
<span id="cb79-2"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(displ, hwy, <span class="at">color =</span> drv)) <span class="sc">+</span> </span>
<span id="cb79-3"><a href=""></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span> </span>
<span id="cb79-4"><a href=""></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb79-5"><a href=""></a>  <span class="fu">geom_text</span>(</span>
<span id="cb79-6"><a href=""></a>    <span class="at">data =</span> label_info,</span>
<span id="cb79-7"><a href=""></a>    <span class="fu">aes</span>(<span class="at">label =</span> drive_type),</span>
<span id="cb79-8"><a href=""></a>    <span class="at">nudge_y =</span> <span class="fl">1.5</span>, <span class="at">nudge_x =</span> <span class="sc">-</span><span class="fl">0.8</span>, </span>
<span id="cb79-9"><a href=""></a>    <span class="at">size =</span> <span class="dv">8</span></span>
<span id="cb79-10"><a href=""></a>  ) <span class="sc">+</span></span>
<span id="cb79-11"><a href=""></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb79-12"><a href=""></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Engine displacement (L)"</span>, <span class="at">y =</span> <span class="st">"Highway fuel economy (mpg)"</span>, <span class="at">color =</span> <span class="st">"Drive train"</span>, <span class="at">title =</span> <span class="st">"Fuel efficiency generally decreases with engine size"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:43%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href=""></a>pp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-82-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="annotations-4" class="slide level2">
<h2>Annotations</h2>
<div class="columns">
<div class="column" style="width:57%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb81" data-code-line-numbers="5-8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href=""></a>pp <span class="ot">&lt;-</span> mpg <span class="sc">|&gt;</span> </span>
<span id="cb81-2"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(displ, hwy, <span class="at">color =</span> drv)) <span class="sc">+</span> </span>
<span id="cb81-3"><a href=""></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.3</span>) <span class="sc">+</span> </span>
<span id="cb81-4"><a href=""></a>  <span class="fu">geom_smooth</span>(<span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb81-5"><a href=""></a>  <span class="fu">geom_text_repel</span>(</span>
<span id="cb81-6"><a href=""></a>    <span class="at">data =</span> label_info,</span>
<span id="cb81-7"><a href=""></a>    <span class="fu">aes</span>(<span class="at">label =</span> drive_type),</span>
<span id="cb81-8"><a href=""></a>    <span class="at">size =</span> <span class="dv">8</span></span>
<span id="cb81-9"><a href=""></a>  ) <span class="sc">+</span></span>
<span id="cb81-10"><a href=""></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb81-11"><a href=""></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Engine displacement (L)"</span>, <span class="at">y =</span> <span class="st">"Highway fuel economy (mpg)"</span>, <span class="at">color =</span> <span class="st">"Drive train"</span>, <span class="at">title =</span> <span class="st">"Fuel efficiency generally decreases with engine size"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:43%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href=""></a>pp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-84-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
<!-- ## Annotations -->
<!-- ::::: columns -->
<!-- ::: {.column width="50%"} -->
<!-- ```{r message=FALSE} -->
<!-- #| fig-width: 10 -->
<!-- ggplot(mpg, aes(displ, hwy, color = drv)) + -->
<!--   geom_point(alpha = 0.3) + -->
<!--   geom_smooth(se = FALSE) + -->
<!--   theme(legend.position = c(0.9, 0.8)) -->
<!-- ``` -->
<!-- ::: -->
<!-- ::: {.column width="50%"} -->
<!-- ```{r message=FALSE} -->
<!-- #| fig-width: 10 -->
<!-- #| code-line-numbers: 2-6 -->
<!-- ggplot(mpg, aes(displ, hwy, color = drv)) + geom_point(alpha = 0.3) + geom_smooth(se = FALSE) + -->
<!--   geom_text_repel( -->
<!--     data = label_info, -->
<!--     aes(displ, hwy, label = drive_type), -->
<!--     # hjust = "right", vjust = "bottom",  -->
<!--     fontface = "bold", size = 5 -->
<!--   ) + -->
<!--   theme(legend.position = "none") -->
<!-- ``` -->
<!-- ::: -->
<!-- ::::: -->
<!-- ## Annotations -->
<!-- ::::: columns -->
<!-- ::: {.column width="50%"} -->
<!-- Why does text appear where it does? -->
<!-- * What are `hjust` and `vjust` doing? -->
<!-- * Let's look at `label_info` again -->
<!-- ```{r} -->
<!-- label_info -->
<!-- ``` -->
<!-- ::: -->
<!-- ::: {.column width="50%"} -->
<!-- * We can use ``ggrepel::geom_label_repel()` to make text repel other text labels. -->
<!-- ```{r} -->
<!-- #| fig-width: 4 -->
<!-- ggplot(mpg, aes(x = displ, y = hwy, color = drv)) + -->
<!--   geom_point(alpha = 0.3) + -->
<!--   geom_smooth(se = FALSE) + -->
<!--   geom_label_repel( -->
<!--     data = label_info, -->
<!--     aes(x = displ, y = hwy, label = drive_type), -->
<!--     fontface = "bold", size = 5, nudge_y = 2 -->
<!--   ) + -->
<!--   theme(legend.position = "none") -->
<!-- ``` -->
<!-- ::: -->
<!-- ::::: -->
</section>
<section id="annotations-5" class="slide level2">
<h2>Annotations</h2>
<p>Same idea can be used to highlight points on plot, e.g.&nbsp;outliers</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb83" data-code-line-numbers="1|4-5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href=""></a>potential_outliers <span class="ot">&lt;-</span> mpg <span class="sc">|&gt;</span> <span class="fu">filter</span>(hwy <span class="sc">&gt;</span> <span class="dv">40</span> <span class="sc">|</span> (hwy <span class="sc">&gt;</span> <span class="dv">20</span> <span class="sc">&amp;</span> displ <span class="sc">&gt;</span> <span class="dv">5</span>))</span>
<span id="cb83-2"><a href=""></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span></span>
<span id="cb83-3"><a href=""></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb83-4"><a href=""></a>  <span class="fu">geom_text_repel</span>(<span class="at">data =</span> potential_outliers, <span class="fu">aes</span>(<span class="at">label =</span> model)) <span class="sc">+</span></span>
<span id="cb83-5"><a href=""></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> potential_outliers, <span class="at">shape =</span> <span class="st">"circle open"</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span> </span>
<span id="cb83-6"><a href=""></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Engine displacement (L)"</span>, <span class="at">y =</span> <span class="st">"Highway fuel economy (mpg)"</span>, <span class="at">color =</span> <span class="st">"Drive train"</span>, <span class="at">title =</span> <span class="st">"Fuel efficiency generally decreases with engine size"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<!-- ## Annotations -->
<!-- ::::: columns -->
<!-- ::: {.column width="50%"} -->
<!-- Same idea can be used to highlight points on plot, e.g. outliers -->
<!-- ```{r, eval=FALSE} -->
<!-- potential_outliers <- mpg |> -->
<!--   filter(hwy > 40 | (hwy > 20 & displ > 5)) -->
<!-- ggplot(mpg, aes(x = displ, y = hwy)) + -->
<!--   geom_point() + -->
<!--   geom_text_repel(data = potential_outliers, aes(label = model)) + -->
<!--   geom_point( -->
<!--     data = potential_outliers, -->
<!--     color = "red", size = 3, shape = "circle open" -->
<!--   ) -->
<!-- ``` -->
<!-- ::: -->
<!-- ::: {.column width="50%"} -->
<!-- ```{r, echo=FALSE} -->
<!-- potential_outliers <- mpg |> -->
<!--   filter(hwy > 40 | (hwy > 20 & displ > 5)) -->
<!-- ggplot(mpg, aes(x = displ, y = hwy)) + -->
<!--   geom_point() + -->
<!--   geom_text_repel(data = potential_outliers, aes(label = model)) + -->
<!--   geom_point( -->
<!--     data = potential_outliers, -->
<!--     color = "red", size = 3, shape = "circle open" -->
<!--   ) -->
<!-- ``` -->
<!-- ::: -->
<!-- ::::: -->
<img data-src="lec10_files/figure-revealjs/unnamed-chunk-85-1.png" class="quarto-figure quarto-figure-center r-stretch" width="960"></section>
<section id="annotations-6" class="slide level2">
<h2>Annotations</h2>
<ul>
<li>Other annotations which you might encounter / could be useful:
<ul>
<li><code>geom_hline()</code>, <code>geom_vline()</code>: create horizontal / vertical lines</li>
<li><code>geom_rect()</code>: rectangle around points of interest, require specifying <code>xmin</code>, <code>xmax</code>, <code>ymin</code>, <code>ymax</code></li>
<li><code>geom_segment()</code>: draw an arrow from one point to another</li>
</ul></li>
<li>Function which allows for doing any of these: <code>annotate()</code></li>
<li>Let’s say we want to add some text to our plot, but split lines every 30 characters using <code>str_wrap()</code></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href=""></a>trend_text <span class="ot">&lt;-</span> <span class="st">"Larger engine sizes tend to have lower fuel economy."</span> <span class="sc">|&gt;</span></span>
<span id="cb84-2"><a href=""></a>  <span class="fu">str_wrap</span>(<span class="at">width =</span> <span class="dv">30</span>)</span>
<span id="cb84-3"><a href=""></a>trend_text</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Larger engine sizes tend to\nhave lower fuel economy."</code></pre>
</div>
</div>
</section>
<section id="annotations-7" class="slide level2">
<h2>Annotations</h2>
<div class="columns">
<div class="column" style="width:55%;">
<ul>
<li>Let’s add a text label in red using <code>annotate(geom = 'label')</code></li>
<li>… and then add a line segment giving general trend</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href=""></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span></span>
<span id="cb86-2"><a href=""></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb86-3"><a href=""></a>  <span class="fu">annotate</span>(</span>
<span id="cb86-4"><a href=""></a>    <span class="at">geom =</span> <span class="st">"label"</span>, <span class="at">x =</span> <span class="fl">3.5</span>, <span class="at">y =</span> <span class="dv">38</span>,</span>
<span id="cb86-5"><a href=""></a>    <span class="at">label =</span> trend_text,</span>
<span id="cb86-6"><a href=""></a>    <span class="at">hjust =</span> <span class="st">"left"</span>, <span class="at">color =</span> <span class="st">"red"</span></span>
<span id="cb86-7"><a href=""></a>  ) <span class="sc">+</span></span>
<span id="cb86-8"><a href=""></a>  <span class="fu">annotate</span>(</span>
<span id="cb86-9"><a href=""></a>    <span class="at">geom =</span> <span class="st">"segment"</span>, <span class="at">x =</span> <span class="dv">3</span>, <span class="at">y =</span> <span class="dv">35</span>, </span>
<span id="cb86-10"><a href=""></a>    <span class="at">xend =</span> <span class="dv">5</span>, <span class="at">yend =</span> <span class="dv">25</span>, <span class="at">color =</span> <span class="st">"red"</span>,</span>
<span id="cb86-11"><a href=""></a>    <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">type =</span> <span class="st">"closed"</span>)</span>
<span id="cb86-12"><a href=""></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:45%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-88-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
<!-- ## Scales -->
<!-- * By default, ggplot2 automatically adds scales for you, e.g. this code -->
<!-- ```{r, eval=FALSE} -->
<!-- ggplot(mpg, aes(x = displ, y = hwy)) + -->
<!--   geom_point(aes(color = class)) -->
<!-- ``` -->
<!-- uses the default behavior for scaling `geom_point()`, which is using continuous scales for x and y and discrete color scales: -->
<!-- ```{r, eval = FALSE} -->
<!-- #| fig-width: 4.5 -->
<!-- ggplot(mpg, aes(x = displ, y = hwy)) + -->
<!--   geom_point(aes(color = class)) + -->
<!--   scale_x_continuous() + -->
<!--   scale_y_continuous() + -->
<!--   scale_color_discrete() -->
<!-- ``` -->
</section>
<section id="axis-ticks" class="slide level2">
<h2>Axis ticks</h2>
<p>Axes and legends are called <strong>guides</strong> in R.</p>
<ul>
<li>Axes used for x,y aesthetics, legends for everything else</li>
<li>Ticks on axes and keys on legend affected by args <code>breaks</code> and <code>labels</code>.</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href=""></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy, <span class="at">color =</span> drv)) <span class="sc">+</span></span>
<span id="cb87-2"><a href=""></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb87-3"><a href=""></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">15</span>, <span class="dv">40</span>, <span class="at">by =</span> <span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-89-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href=""></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy, <span class="at">color =</span> drv)) <span class="sc">+</span></span>
<span id="cb88-2"><a href=""></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb88-3"><a href=""></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb88-4"><a href=""></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="cn">NULL</span>) <span class="sc">+</span></span>
<span id="cb88-5"><a href=""></a>  <span class="fu">scale_color_discrete</span>(<span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"4"</span> <span class="ot">=</span> <span class="st">"4-wheel"</span>, <span class="st">"f"</span> <span class="ot">=</span> <span class="st">"front"</span>, <span class="st">"r"</span> <span class="ot">=</span> <span class="st">"rear"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-90-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="axis-ticks-1" class="slide level2">
<h2>Axis ticks</h2>
<ul>
<li>Specifying <code>labels</code> and <code>breaks</code> provides a lot of flexibility on how to plot</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href=""></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(price, cut, <span class="at">fill =</span> cut)) <span class="sc">+</span></span>
<span id="cb89-2"><a href=""></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb89-3"><a href=""></a>  <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> <span class="fu">label_dollar</span>()) <span class="sc">+</span> </span>
<span id="cb89-4"><a href=""></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-91-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href=""></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(price, cut, <span class="at">fill =</span> cut)) <span class="sc">+</span></span>
<span id="cb90-2"><a href=""></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb90-3"><a href=""></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb90-4"><a href=""></a>    <span class="at">labels =</span> <span class="fu">label_dollar</span>(<span class="at">scale =</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">1000</span>, <span class="at">suffix =</span> <span class="st">"K"</span>),</span>
<span id="cb90-5"><a href=""></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">1000</span>, <span class="dv">19000</span>, <span class="at">by =</span> <span class="dv">4000</span>) </span>
<span id="cb90-6"><a href=""></a>  ) <span class="sc">+</span> </span>
<span id="cb90-7"><a href=""></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-92-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
<!-- ```{r} -->
<!-- #| fig-width: 4.5 -->
<!-- #| layout-ncol: 2 -->
<!-- # Left -->
<!-- ggplot(diamonds, aes(x = price, y = cut)) + -->
<!--   geom_boxplot(alpha = 0.05) + -->
<!--   scale_x_continuous(labels = label_dollar()) -->
<!-- # Right -->
<!-- ggplot(diamonds, aes(x = price, y = cut)) + -->
<!--   geom_boxplot(alpha = 0.05) + -->
<!--   scale_x_continuous( -->
<!--     labels = label_dollar(scale = 1/1000, suffix = "K"), -->
<!--     breaks = seq(1000, 19000, by = 6000) ) -->
<!-- ``` -->
</section>
<section id="legends" class="slide level2">
<h2>Legends</h2>
<p>To control location of legend, use <code>theme()</code> (controls non data parts of a plot)</p>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href=""></a>base <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(<span class="at">x =</span> displ, <span class="at">y =</span> hwy)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> class))</span>
<span id="cb91-2"><a href=""></a></span>
<span id="cb91-3"><a href=""></a>base <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>)  <span class="co"># the default</span></span>
<span id="cb91-4"><a href=""></a>base <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"left"</span>)</span>
<span id="cb91-5"><a href=""></a>base <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>) <span class="sc">+</span> <span class="fu">guides</span>(<span class="at">color =</span> <span class="fu">guide_legend</span>(<span class="at">nrow =</span> <span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="3">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-93-1.png" width="384"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-93-2.png" width="384"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-93-3.png" width="384"></p>
</div>
</div>
</div>
<!-- ::: -->
<!-- ::: {.column width="50%"} -->
<!-- ```{r} -->
<!-- #| layout-ncol: 2 -->
<!-- #| fig-width: 3 -->
<!-- #| echo: false -->
<!-- base <- ggplot(mpg, aes(x = displ, y = hwy)) + -->
<!--   geom_point(aes(color = class)) -->
<!-- base + theme(legend.position = "right") # the default -->
<!-- base + theme(legend.position = "left") -->
<!-- base + -->
<!--   theme(legend.position = "top") + -->
<!--   guides(color = guide_legend(nrow = 3)) -->
<!-- base + -->
<!--   theme(legend.position = "bottom") + -->
<!--   guides(color = guide_legend(nrow = 3)) -->
<!-- ``` -->
<!-- ::: -->
<!-- ::::: -->
</section>
<section id="replacing-scales" class="slide level2">
<h2>Replacing scales</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>Often useful to transform data, e.g.&nbsp;log transformations</li>
</ul>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href=""></a>diamonds <span class="sc">|&gt;</span> </span>
<span id="cb92-2"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(carat, price)) <span class="sc">+</span></span>
<span id="cb92-3"><a href=""></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.02</span>)</span>
<span id="cb92-4"><a href=""></a>diamonds <span class="sc">|&gt;</span> </span>
<span id="cb92-5"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="fu">log10</span>(carat), <span class="fu">log10</span>(price))) <span class="sc">+</span></span>
<span id="cb92-6"><a href=""></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.02</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-94-1.png" width="960"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-94-2.png" width="960"></p>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>A useful geom for large-sample-size datasets: <code>geom_bin2d()</code></li>
</ul>
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href=""></a><span class="co"># Left</span></span>
<span id="cb93-2"><a href=""></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(carat, price)) <span class="sc">+</span></span>
<span id="cb93-3"><a href=""></a>  <span class="fu">geom_bin2d</span>()</span>
<span id="cb93-4"><a href=""></a><span class="co"># Right</span></span>
<span id="cb93-5"><a href=""></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(<span class="fu">log10</span>(carat), <span class="fu">log10</span>(price))) <span class="sc">+</span></span>
<span id="cb93-6"><a href=""></a>  <span class="fu">geom_bin2d</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-95-1.png" width="960"></p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-95-2.png" width="960"></p>
</div>
</div>
</div>
</div></div>
</section>
<section id="replacing-scales-1" class="slide level2">
<h2>Replacing scales</h2>
<!-- * Not ideal that previous plots had `log10(carat)` on the x axis, hard to interpret -->
<ul>
<li>Can use <code>scale_x_log10()</code> and <code>scale_y_log190)</code> to plot regular values, but with ticks that are spread using a log scale</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href=""></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(carat, price)) <span class="sc">+</span></span>
<span id="cb94-2"><a href=""></a>  <span class="fu">geom_bin2d</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-96-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href=""></a><span class="fu">ggplot</span>(diamonds, <span class="fu">aes</span>(carat, price)) <span class="sc">+</span></span>
<span id="cb95-2"><a href=""></a>  <span class="fu">geom_bin2d</span>() <span class="sc">+</span></span>
<span id="cb95-3"><a href=""></a>  <span class="fu">scale_x_log10</span>() <span class="sc">+</span> <span class="fu">scale_y_log10</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-97-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
<!-- ```{r} -->
<!-- #| layout-ncol: 2 -->
<!-- #| fig-width: 4.5 -->
<!-- ggplot(diamonds, aes(carat, price)) + -->
<!--   geom_bin2d() -->
<!-- ggplot(diamonds, aes(carat, price)) + -->
<!--   geom_bin2d() + -->
<!--   scale_x_log10() + scale_y_log10() -->
<!-- ``` -->
</section>
<section id="replacing-scales-2" class="slide level2">
<h2>Replacing scales</h2>
<ul>
<li>Color scales are also often replaced; especially using <code>scale_color_brewer()</code></li>
</ul>
<div class="columns">
<div class="column" style="width:45%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href=""></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span></span>
<span id="cb96-2"><a href=""></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> drv))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-98-1.png" alt="Two scatterplots of highway mileage versus engine size where points are colored by drive type. The plot on the left uses the default ggplot2 color palette and the plot on the right uses a different color palette." width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:55%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href=""></a><span class="fu">ggplot</span>(mpg, <span class="fu">aes</span>(displ, hwy)) <span class="sc">+</span></span>
<span id="cb97-2"><a href=""></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> drv)) <span class="sc">+</span></span>
<span id="cb97-3"><a href=""></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Set1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-99-1.png" alt="Two scatterplots of highway mileage versus engine size where points are colored by drive type. The plot on the left uses the default ggplot2 color palette and the plot on the right uses a different color palette." width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="replacing-scales-3" class="slide level2">
<h2>Replacing scales</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Many options for color brewer</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href=""></a>RColorBrewer<span class="sc">::</span><span class="fu">display.brewer.all</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-100-1.png" width="960"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li>One group goes from light to dark colors.</li>
<li>Another group is a set of non ordinal colors.</li>
<li>Last group has diverging scales (from dark to light to dark again).</li>
</ul>
</div></div>
</section>
<section id="manual-color-scaling" class="slide level2">
<h2>Manual color scaling</h2>
<div class="columns">
<div class="column" style="width:57%;">
<p><code>scale_color_manual()</code> allows giving specific colors for groups in the tibble</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href=""></a>presidential <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 4
  name       start      end        party     
  &lt;chr&gt;      &lt;date&gt;     &lt;date&gt;     &lt;chr&gt;     
1 Eisenhower 1953-01-20 1961-01-20 Republican
2 Kennedy    1961-01-20 1963-11-22 Democratic
3 Johnson    1963-11-22 1969-01-20 Democratic
4 Nixon      1969-01-20 1974-08-09 Republican
5 Ford       1974-08-09 1977-01-20 Republican
6 Carter     1977-01-20 1981-01-20 Democratic</code></pre>
</div>
</div>
<ul>
<li>Takes argument <code>values</code>: a named vector, with entries of the form <code>group=color</code>.</li>
<li><code>color</code> can be either English names (“blue”, “red”) or hexadecimal color codes</li>
</ul>
</div><div class="column" style="width:43%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href=""></a>presidential <span class="sc">|&gt;</span></span>
<span id="cb101-2"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="dv">33</span> <span class="sc">+</span> <span class="fu">row_number</span>()) <span class="sc">|&gt;</span></span>
<span id="cb101-3"><a href=""></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(start, id, <span class="at">color =</span> party)) <span class="sc">+</span></span>
<span id="cb101-4"><a href=""></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb101-5"><a href=""></a>  <span class="fu">geom_segment</span>(<span class="fu">aes</span>(<span class="at">xend =</span> end, <span class="at">yend =</span> id)) <span class="sc">+</span></span>
<span id="cb101-6"><a href=""></a>  <span class="fu">scale_color_manual</span>(</span>
<span id="cb101-7"><a href=""></a>    <span class="at">values =</span> <span class="fu">c</span>(<span class="at">Republican =</span> <span class="st">"#E81B23"</span>,</span>
<span id="cb101-8"><a href=""></a>               <span class="at">Democratic =</span> <span class="st">"#00AEF3"</span>)) <span class="sc">+</span> </span>
<span id="cb101-9"><a href=""></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.8</span>, <span class="fl">0.2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="lec10_files/figure-revealjs/unnamed-chunk-102-1.png" alt="Line plot of id number of presidents versus the year they started their presidency. Start year is marked with a point and a segment that starts there and ends at the end of the presidency. Democratic presidents are represented in blue and Republicans in red." width="960"></p>
</figure>
</div>
</div>
</div>
</div></div>
<!-- # More examples -->
<!-- ## Can change order of levels in factors -->
<!-- ```{r} -->
<!-- #| code-line-numbers: "2" -->
<!-- penguins |> -->
<!--     mutate(island = factor(island, levels=c("Dream", "Biscoe", "Torgersen"))) |> -->
<!--     ggplot(aes(x = flipper_length_mm, y = body_mass_g)) + -->
<!--     geom_point(aes(color = species, shape = species)) + -->
<!--     facet_wrap(~island) -->
<!-- ``` -->
<!-- ## Shapes can be difficult to distinguish -->
<!-- ```{r,fig.width=7, fig.height=4, warning=FALSE} -->
<!-- penguins |> -->
<!--     ggplot(aes(x = flipper_length_mm, y = body_mass_g)) + -->
<!--     geom_point(aes(color = species, shape = species)) -->
<!-- ``` -->
<!-- ## Sometimes easier to read by replacing shape with first letter -->
<!-- ```{r,fig.width=7, fig.height=4, warning=FALSE} -->
<!-- #| code-line-numbers: "2,4" -->
<!-- penguins |> -->
<!--     mutate(species_first_letter = substr(species, 1, 1)) |> -->
<!--     ggplot(aes(x = flipper_length_mm, y = body_mass_g)) + -->
<!--     geom_text(aes(color = species, label = species_first_letter)) -->
<!-- ``` -->
<!-- ## Might allow you to remove the legend -->
<!-- ```{r,fig.width=7, fig.height=4, warning=FALSE} -->
<!-- #| code-line-numbers: "5" -->
<!-- penguins |> -->
<!--     mutate(species_first_letter = substr(species, 1, 1)) |> -->
<!--     ggplot(aes(x = flipper_length_mm, y = body_mass_g)) + -->
<!--     geom_text(aes(color = species, label = species_first_letter)) + -->
<!--     theme(legend.position = "none") -->
<!-- ``` -->
<!-- ## Change background -->
<!-- I don't like the gray default background -->
<!-- ```{r,fig.width=7, fig.height=4, warning=FALSE} -->
<!-- #| code-line-numbers: "4" -->
<!-- penguins |> -->
<!--     ggplot(aes(x = flipper_length_mm, y = body_mass_g)) + -->
<!--     geom_point(aes(color = species, shape = species)) + -->
<!--     theme_minimal()  # too minimal for my tastes -->
<!-- ``` -->
<!-- ## Change background -->
<!-- I don't like the gray default background -->
<!-- ```{r,fig.width=7, fig.height=4, warning=FALSE} -->
<!-- #| code-line-numbers: "4" -->
<!-- penguins |> -->
<!--     ggplot(aes(x = flipper_length_mm, y = body_mass_g)) + -->
<!--     geom_point(aes(color = species, shape = species)) + -->
<!--     theme_bw()  # Gestalt principles: how does the human brain organize visual information? -->
<!-- ``` -->
<!-- ## Examples in action -->
<!-- Many extensions: <https://exts.ggplot2.tidyverse.org/gallery/> -->
<!-- # Interactive visualizations -->
<!-- ## Why do interactive visualizations? -->
<!-- As with static visualizations: -->
<!-- - Explore data -->
<!-- - As the final product itself (i.e., the "deliverable") -->
<!-- Goal should determine how much time/effort to put in -->
<!-- ## (gg)plotly -->
<!-- ```{r} -->
<!-- pp <- penguins |> ggplot(aes(x = flipper_length_mm, y = body_mass_g)) + geom_point(aes(color = species, shape = sex)) + facet_grid(year~island) + theme(text = element_text(size=14)) -->
<!-- pp  # static visualization -->
<!-- ``` -->
<!-- ## (gg)plotly -->
<!-- ```{r} -->
<!-- #| fig-width: 10.9 -->
<!-- library(plotly)  # may need install.packages("plotly") -->
<!-- ggplotly(pp)  # interactive visualization. toggle via single-click or double-click -->
<!-- ``` -->
<!-- ## Other ways (not necessary R) -->
<!-- - Shiny: [https://shiny.posit.co/](https://shiny.posit.co/) -->
<!--     - R or Python -->
<!--     - Pro: free -->
<!--     - Con: not as much functionality as the two below -->
<!-- - Tableau: [https://www.tableau.com/](https://www.tableau.com/) -->
<!--     - drag and drop -->
<!--     - Pro: lots of functionality, professional looking -->
<!--     - Con: not free -->
<!-- - d3: [https://d3js.org/](https://d3js.org/) -->
<!--     - JavaScript library -->
<!--     - Pro: free, lots of functionality, professional looking -->
<!--     - Con: coding might be difficult -->
<div class="quarto-auto-generated-content">
<div class="footer footer-default">
<p><a href="https://ahoriguchi.github.io/teaching/STA35B/website.html" class="uri">https://ahoriguchi.github.io/teaching/STA35B/website.html</a></p>
</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="lec10_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="lec10_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="lec10_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="lec10_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="lec10_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="lec10_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="lec10_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="lec10_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="lec10_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="lec10_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'h.v',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        // For code content inside modals, clipBoardJS needs to be initialized with a container option
        // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>